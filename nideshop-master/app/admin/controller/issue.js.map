{
    "version": 3,
    "sources": [
        "../../../src/admin/controller/issue.js"
    ],
    "names": [
        "module",
        "exports",
        "think",
        "Controller",
        "indexAction",
        "issue",
        "model",
        "select",
        "success",
        "addAction",
        "isPost",
        "id",
        "post",
        "values",
        "goods_id",
        "question",
        "answer",
        "where",
        "update",
        "add",
        "infoAction",
        "get",
        "data",
        "find",
        "deleteAction",
        "limit",
        "delete"
    ],
    "mappings": ";;AAAAA,OAAOC,OAAP,GAAiB,cAAcC,MAAMC,UAApB,CAA+B;AAC9C;;;;AAIMC,aAAN,GAAoB;AAAA;;AAAA;AAClB,YAAMC,QAAQ,MAAM,MAAKC,KAAL,CAAW,aAAX,EAA0BC,MAA1B,EAApB;AACA,aAAO,MAAKC,OAAL,CAAaH,KAAb,CAAP;AAFkB;AAGnB;;AAED;;;;;;;AAOMI,WAAN,GAAkB;AAAA;;AAAA;AAChB,UAAI,CAAC,OAAKC,MAAV,EAAkB;AAChB,eAAO,KAAP;AACD;AACD,YAAMC,KAAK,OAAKC,IAAL,CAAU,IAAV,CAAX;;AAEA,YAAMN,QAAQ,OAAKA,KAAL,CAAW,aAAX,CAAd;;AAEA,UAAIO,SAAS;AACXC,kBAAS,OADE;AAEXC,kBAAS,OAAKH,IAAL,CAAU,UAAV,CAFE;AAGXI,gBAAQ,OAAKJ,IAAL,CAAU,QAAV;AAHG,OAAb;AAKA,UAAID,KAAK,CAAT,EAAY;AACV,cAAML,MAAMW,KAAN,CAAY,EAACN,IAAIA,EAAL,EAAZ,EAAsBO,MAAtB,CAA6BL,MAA7B,CAAN;AACD,OAFD,MAEO;AACL,eAAOA,OAAOF,EAAd;AACA,cAAML,MAAMa,GAAN,CAAUN,MAAV,CAAN;AACD;AACD,aAAO,OAAKL,OAAL,CAAaK,MAAb,CAAP;AAnBgB;AAoBjB;;AAEKO,YAAN,GAAkB;AAAA;;AAAA;AAChB,YAAMT,KAAK,OAAKC,IAAL,CAAU,IAAV,KAAmB,OAAKS,GAAL,CAAS,IAAT,CAA9B;;AAEA,YAAMf,QAAQ,OAAKA,KAAL,CAAW,aAAX,CAAd;AACA,YAAMgB,OAAO,MAAMhB,MAAMW,KAAN,CAAY,EAACN,IAAIA,EAAL,EAAZ,EAAsBY,IAAtB,EAAnB;AACA,aAAO,OAAKf,OAAL,CAAac,IAAb,CAAP;AALgB;AAMjB;;AAGD;;;;AAIME,cAAN,GAAqB;AAAA;;AAAA;AACnB,YAAMb,KAAK,OAAKC,IAAL,CAAU,IAAV,CAAX;AACA,YAAM,OAAKN,KAAL,CAAW,aAAX,EAA0BW,KAA1B,CAAgC,EAACN,IAAIA,EAAL,EAAhC,EAA0Cc,KAA1C,CAAgD,CAAhD,EAAmDC,MAAnD,EAAN;;AAEA;;AAEA,aAAO,OAAKlB,OAAL,EAAP;AANmB;AAOpB;AA3D6C,CAAhD",
    "file": "../../../src/admin/controller/issue.js",
    "sourcesContent": [
        "module.exports = class extends think.Controller {\n  /**\n   * 获取banner信息\n   * @returns {Promise<void>}\n   */\n  async indexAction() {\n    const issue = await this.model('goods_issue').select();\n    return this.success(issue);\n  }\n\n  /**\n   *  `id` int(11) NOT NULL AUTO_INCREMENT,\n     `goods_id` text COLLATE utf8mb4_unicode_ci,\n     `question` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\n     `answer` varchar(45) COLLATE utf8mb4_unicode_ci DEFAULT NULL,\n   * @returns {Promise<*>}\n   */\n  async addAction() {\n    if (!this.isPost) {\n      return false;\n    }\n    const id = this.post('id');\n\n    const model = this.model('goods_issue');\n\n    let values = {\n      goods_id:1127052,\n      question:this.post('question'),\n      answer: this.post('answer')\n    };\n    if (id > 0) {\n      await model.where({id: id}).update(values);\n    } else {\n      delete values.id;\n      await model.add(values);\n    }\n    return this.success(values);\n  }\n\n  async infoAction(){\n    const id = this.post('id') || this.get('id');\n\n    const model = this.model('goods_issue');\n    const data = await model.where({id: id}).find();\n    return this.success(data);\n  }\n\n\n  /**\n   * 删除一个banner\n   * @returns {Promise<void>}\n   */\n  async deleteAction() {\n    const id = this.post('id');\n    await this.model('goods_issue').where({id: id}).limit(1).delete();\n\n    // TODO 事务，验证订单是否可删除（只有失效的订单才可以删除）\n\n    return this.success();\n  }\n};\n"
    ]
}