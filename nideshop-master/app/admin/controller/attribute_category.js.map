{
    "version": 3,
    "sources": [
        "../../../src/admin/controller/attribute_category.js"
    ],
    "names": [
        "module",
        "exports",
        "think",
        "Controller",
        "indexAction",
        "attribute",
        "model",
        "where",
        "select",
        "success",
        "addAction",
        "isPost",
        "id",
        "post",
        "values",
        "name",
        "enabled",
        "update",
        "add",
        "infoAction",
        "get",
        "data",
        "find",
        "deleteAction",
        "limit",
        "delete"
    ],
    "mappings": ";;AAAAA,OAAOC,OAAP,GAAiB,cAAcC,MAAMC,UAApB,CAA+B;AAC9C;;;;AAIMC,aAAN,GAAoB;AAAA;;AAAA;AAClB,YAAMC,YAAY,MAAM,MAAKC,KAAL,CAAW,oBAAX,EAAiCC,KAAjC,GAAyCC,MAAzC,EAAxB;AACA,aAAO,MAAKC,OAAL,CAAaJ,SAAb,CAAP;AAFkB;AAGnB;;AAED;;;;;AAKMK,WAAN,GAAkB;AAAA;;AAAA;AAChB,UAAI,CAAC,OAAKC,MAAV,EAAkB;AAChB,eAAO,KAAP;AACD;AACD,YAAMC,KAAK,OAAKC,IAAL,CAAU,IAAV,CAAX;;AAEA,YAAMP,QAAQ,OAAKA,KAAL,CAAW,oBAAX,CAAd;;AAEA,UAAIQ,SAAS;AACXC,cAAK,OAAKF,IAAL,CAAU,MAAV,CADM;AAEXG,iBAAQ,OAAKH,IAAL,CAAU,SAAV,IAAsB,CAAtB,GAAyB;AAFtB,OAAb;AAIA,UAAID,KAAK,CAAT,EAAY;AACV,cAAMN,MAAMC,KAAN,CAAY,EAACK,IAAIA,EAAL,EAAZ,EAAsBK,MAAtB,CAA6BH,MAA7B,CAAN;AACD,OAFD,MAEO;AACL,eAAOA,OAAOF,EAAd;AACA,cAAMN,MAAMY,GAAN,CAAUJ,MAAV,CAAN;AACD;AACD,aAAO,OAAKL,OAAL,CAAaK,MAAb,CAAP;AAlBgB;AAmBjB;;AAEKK,YAAN,GAAkB;AAAA;;AAAA;AAChB,YAAMP,KAAK,OAAKC,IAAL,CAAU,IAAV,KAAmB,OAAKO,GAAL,CAAS,IAAT,CAA9B;;AAEA,YAAMd,QAAQ,OAAKA,KAAL,CAAW,oBAAX,CAAd;AACA,YAAMe,OAAO,MAAMf,MAAMC,KAAN,CAAY,EAACK,IAAIA,EAAL,EAAZ,EAAsBU,IAAtB,EAAnB;AACA,aAAO,OAAKb,OAAL,CAAaY,IAAb,CAAP;AALgB;AAMjB;;AAGD;;;;AAIME,cAAN,GAAqB;AAAA;;AAAA;AACnB,YAAMX,KAAK,OAAKC,IAAL,CAAU,IAAV,CAAX;AACA,YAAM,OAAKP,KAAL,CAAW,oBAAX,EAAiCC,KAAjC,CAAuC,EAACK,IAAIA,EAAL,EAAvC,EAAiDY,KAAjD,CAAuD,CAAvD,EAA0DC,MAA1D,EAAN;;AAEA;;AAEA,aAAO,OAAKhB,OAAL,EAAP;AANmB;AAOpB;AAxD6C,CAAhD",
    "file": "../../../src/admin/controller/attribute_category.js",
    "sourcesContent": [
        "module.exports = class extends think.Controller {\n  /**\n   * 获取banner信息\n   * @returns {Promise<void>}\n   */\n  async indexAction() {\n    const attribute = await this.model('attribute_category').where().select();\n    return this.success(attribute);\n  }\n\n  /**\n   `id` int(11) unsigned NOT NULL,\n   `name` varchar(60) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',\n   `enabled` tinyint(1) unsigned NOT NULL DEFAULT '1',\n   */\n  async addAction() {\n    if (!this.isPost) {\n      return false;\n    }\n    const id = this.post('id');\n\n    const model = this.model('attribute_category');\n\n    let values = {\n      name:this.post('name'),\n      enabled:this.post('enabled')? 1: 0\n    };\n    if (id > 0) {\n      await model.where({id: id}).update(values);\n    } else {\n      delete values.id;\n      await model.add(values);\n    }\n    return this.success(values);\n  }\n\n  async infoAction(){\n    const id = this.post('id') || this.get('id');\n\n    const model = this.model('attribute_category');\n    const data = await model.where({id: id}).find();\n    return this.success(data);\n  }\n\n\n  /**\n   * 删除一个attribute\n   * @returns {Promise<void>}\n   */\n  async deleteAction() {\n    const id = this.post('id');\n    await this.model('attribute_category').where({id: id}).limit(1).delete();\n\n    // TODO 事务，验证订单是否可删除（只有失效的订单才可以删除）\n\n    return this.success();\n  }\n};\n"
    ]
}